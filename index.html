<!DOCTYPE html>
<html lang="sr">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Rezultati</title>
      <script type="module" src="firebase.mjs"></script>
      <style>
         @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
         :root {
         --bg-a: #ecf6ff;
         --bg-b: #f5fffb;
         --ink: #0f172a;
         --muted: #5b667a;
         --brand: #1178c8;
         --brand-2: #0ea5a6;
         --card-border: #dce7f5;
         --ring: rgba(17, 120, 200, 0.16);
         --focus: #0b66b8;
         --score-neutral: #111827;
         }
         html {
         scroll-behavior: smooth;
         }
         * {
         box-sizing: border-box;
         margin: 0;
         padding: 0;
         }
         body {
         font-family: 'Plus Jakarta Sans', 'Avenir Next', 'Segoe UI', sans-serif;
         background:
           radial-gradient(1200px 420px at 10% -10%, rgba(17, 120, 200, 0.15), transparent 55%),
           radial-gradient(1000px 360px at 100% 0%, rgba(14, 165, 166, 0.12), transparent 45%),
           linear-gradient(180deg, var(--bg-a) 0%, var(--bg-b) 100%);
         min-height: 100vh;
         padding: 30px 15px;
         color: var(--ink);
         }
         body.modal-open {
         position: fixed;
         width: 100%;
         overflow: hidden;
         touch-action: none;
         }
         .container {
         max-width: 980px;
         margin: 0 auto;
         }
         /* HEADER */
         header {
         background: white;
         border-radius: 16px;
         padding: 25px 35px;
         margin-bottom: 35px;
         box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
         text-align: center;
         transition: transform 0.3s ease, box-shadow 0.3s ease;
         animation: riseIn 0.45s ease both;
         }
         header:hover {
         transform: translateY(-2px);
         box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
         }
         .logo {
         font-size: 32px;
         font-weight: bold;
         background: linear-gradient(120deg, #0b66b8 0%, #0ea5a6 100%);
         -webkit-background-clip: text;
         -webkit-text-fill-color: transparent;
         background-clip: text;
         margin-bottom: 20px;
         }
         .header-nav {
         display: flex;
         gap: 12px;
         align-items: center;
         justify-content: center;
         }
         .header-actions {
         margin-top: 14px;
         display: flex;
         justify-content: center;
         }
         #themeToggle {
         border: 1px solid rgba(11, 102, 184, 0.24);
         background: #eff7ff;
         color: #0b66b8;
         border-radius: 12px;
         min-height: 38px;
         padding: 8px 14px;
         font-size: 12px;
         font-weight: 800;
         letter-spacing: 0.03em;
         cursor: pointer;
         transition: all 0.2s ease;
         }
         #themeToggle:hover {
         background: #0b66b8;
         color: #fff;
         transform: translateY(-1px);
         }
         .quick-nav {
         margin-top: 14px;
         display: flex;
         gap: 8px;
         justify-content: center;
         flex-wrap: wrap;
         }
         .quick-pill {
         text-decoration: none;
         font-size: 12px;
         font-weight: 700;
         color: #0b66b8;
         background: #eff7ff;
         border: 1px solid rgba(11, 102, 184, 0.22);
         padding: 6px 10px;
         border-radius: 999px;
         transition: all 0.2s ease;
         }
         .quick-pill:hover {
         background: #0b66b8;
         color: #fff;
         transform: translateY(-1px);
         }
         .hero-subtitle {
         font-size: 13px;
         color: #5b667a;
         margin-bottom: 18px;
         }
         .team-link {
         padding: 12px 20px;
         border: none;
         border-radius: 10px;
         font-size: 14px;
         font-weight: 600;
         cursor: pointer;
         transition: all 0.3s ease;
         text-decoration: none;
         display: inline-flex;
         align-items: center;
         gap: 6px;
         white-space: nowrap;
         justify-content: center;
         text-align: center;
         }
         /* LINEUP FIELD */
         .lineup-field {
         position: relative;
         width: 100%;
         max-width: 420px;
         margin: 0 auto;
         aspect-ratio: 2 / 3;
         background: url('field.png') center / cover no-repeat;
         border-radius: 10px;
         box-shadow: inset 0 0 0 2px rgba(255,255,255,0.8);
         }
         .lineup-team {
         position: absolute;
         width: 100%;
         height: 50%;
         left: 0;
         }
         .lineup-team.red { top: 0; }
         .lineup-team.blue { bottom: 0; transform: rotate(180deg); }
         .player {
         position: absolute;
         transform: translate(-50%, -50%);
         font-size: 11px;
         font-weight: 600;
         padding: 4px 6px;
         border-radius: 6px;
         white-space: nowrap;
         box-shadow: 0 2px 6px rgba(0,0,0,0.25);
         }
         .player.red {
         background: #ffe5e5;
         color: #d63031;
         }
         .player.blue {
         background: #e5f0ff;
         color: #0984e3;
         }
         /* positions */
         .pos-gk   { top: 85%; left: 50%; }
         .pos-dl   { top: 65%; left: 20%; }
         .pos-dc1  { top: 65%; left: 40%; }
         .pos-dc2  { top: 65%; left: 60%; }
         .pos-dr   { top: 65%; left: 80%; }
         .team-link.red {
         background: linear-gradient(135deg, #ffe5e5 0%, #ffcccc 100%);
         color: #d63031;
         border: 2px solid #d63031;
         }
         .team-link.red:hover {
         background: #d63031;
         color: white;
         transform: translateY(-2px);
         box-shadow: 0 4px 12px rgba(214, 48, 49, 0.3);
         }
         .team-link.blue {
         background: linear-gradient(135deg, #e5f0ff 0%, #cce5ff 100%);
         color: #0984e3;
         border: 2px solid #0984e3;
         }
         .team-link.blue:hover {
         background: #0984e3;
         color: white;
         transform: translateY(-2px);
         box-shadow: 0 4px 12px rgba(9, 132, 227, 0.3);
         }
         #loginBtn {
         padding: 12px 24px;
         border: none;
         border-radius: 10px;
         font-size: 14px;
         font-weight: 600;
         cursor: pointer;
         transition: all 0.3s ease;
         background: linear-gradient(135deg, #0b66b8 0%, #0ea5a6 100%);
         color: white;
         box-shadow: 0 8px 20px var(--ring);
         }
         #loginBtn:hover {
         background: linear-gradient(135deg, #095ca8 0%, #0c9597 100%);
         transform: translateY(-2px);
         box-shadow: 0 10px 24px var(--ring);
         }
         /* MAIN CARD */
         .card {
         background: white;
         border-radius: 16px;
         padding: 0;
         margin-bottom: 30px;
         box-shadow: 0 14px 32px rgba(15, 23, 42, 0.08);
         border: 1px solid var(--card-border);
         overflow: hidden;
         transition: transform 0.3s ease, box-shadow 0.3s ease;
         animation: riseIn 0.45s ease both;
         }
         .card:nth-of-type(2) { animation-delay: 0.05s; }
         .card:nth-of-type(3) { animation-delay: 0.1s; }
         .scorers-table-wrapper tbody tr {
         border-bottom: 1px solid rgba(0,0,0,0.04);
         }
         .card:hover {
         transform: translateY(-4px);
         box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
         }
         /* Section headers with gradient */
         .card-header {
         padding: 22px 32px;
         background: linear-gradient(180deg, #ffffff 0%, #f6f7fb 100%);
         color: var(--ink);
         font-size: 22px;
         font-weight: 800;
         border-bottom: 1px solid #e3e6f3;
         }
         .card-header::after {
         content: "";
         display: block;
         width: 48px;
         height: 3px;
         background: linear-gradient(120deg, #0b66b8, #0ea5a6);
         margin: 10px auto 0;
         border-radius: 2px;
         }
         .card-content {
         padding: 30px 35px 35px;
         }
         h1, h2 {
         font-size: 24px;
         font-weight: 700;
         margin: 0;
         text-align: center;
         }
         .modal-actions {
         display: flex;
         gap: 8px;
         margin-bottom: 12px;
         }
         .modal-btn {
         border: none;
         padding: 6px 12px;
         font-size: 12px;
         font-weight: 600;
         border-radius: 6px;
         cursor: pointer;
         background: #f1f3f5;
         color: #333;
         }
         .modal-btn.active {
         background: linear-gradient(135deg, #0b66b8, #0ea5a6);
         color: white;
         }
         /* MATCH BOX */
         .match-box {
         padding: 28px;
         border-radius: 12px;
         background: linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);
         border: 1px solid var(--card-border);
         }
         /* === SCORERS TABLE UX IMPROVEMENTS === */
         /* Ime igraca - jači fokus */
         .scorers-table-wrapper td:first-child {
         font-weight: 600;
         text-align: left;
         }
         /* Tim - sekundarna informacija */
         .scorers-table-wrapper td:nth-child(2) {
         font-size: 12px;
         opacity: 0.7;
         }
         /* Golovi - primarni signal */
         .scorers-table-wrapper td:nth-child(3) {
         font-size: 16px;
         font-weight: 800;
         color: #1e293b;
         }
         .scorers-table-wrapper td:nth-child(4) {
         font-weight: 700;
         color: #475569;
         }
         /* Recent match boxes - lighter styling */
         .recent-matches-content .match-box {
         background: transparent;
         border: none;
         border-bottom: 2px solid #f0f0f0;
         border-radius: 0;
         padding: 20px 0;
         margin-bottom: 0;
         transition: background 0.2s ease;
         }
         .recent-matches-content .match-box:hover {
         background: rgba(102, 126, 234, 0.02);
         }
         .recent-matches-content .match-box:last-of-type {
         border-bottom: none;
         }
         .match-info {
         opacity: 0.8;
         margin-bottom: 18px;
         text-align: center;
         font-size: 14px;
         color: #636e72;
         }
         .match-links {
         display: flex;
         gap: 8px;
         justify-content: center;
         margin-top: 12px;
         flex-wrap: wrap;
         }
         .team-logo {
         width: 140px;
         height: 140px;
         object-fit: contain;
         transition: transform 0.3s ease;
         }
         .team-logo:hover {
         transform: scale(1.1);
         }
         .team-name {
         font-weight: bold;
         margin-top: 8px;
         font-size: 16px;
         }
         .score {
         font-size: 42px;
         margin: 10px 0;
         font-weight: 800;
         color: #2d3436;
         }
         .score .red {
         color: var(--score-neutral);
         }
         .score .blue {
         color: var(--score-neutral);
         }
         .score-small {
         font-size: 32px;
         font-weight: 700;
         margin: 5px 0;
         color: #2d3436;
         }
         .score-small .red {
         color: var(--score-neutral);
         }
         .score-small .blue {
         color: var(--score-neutral);
         }
         .info-link {
         cursor: pointer;
         font-size: 12px;
         font-weight: 600;
         padding: 6px 12px;
         border-radius: 6px;
         background: #eff7ff;
         color: #0b66b8;
         border: 1px solid rgba(11, 102, 184, 0.24);
         transition: all 0.2s ease;
         min-height: 36px;
         }
         .info-link:hover {
         background: #0b66b8;
         color: white;
         transform: translateY(-1px);
         }
         .main-match-teams,
         .recent-match-teams {
         display: flex;
         justify-content: space-around;
         align-items: center;
         gap: 18px;
         }
         .team-col {
         text-align: center;
         }
         .team-name-red {
         color: #d63031;
         }
         .team-name-blue {
         color: #0984e3;
         }
         .team-name-small {
         font-size: 14px;
         }
         .form-team.red {
         color: #d63031;
         }
         .form-team.blue {
         color: #0984e3;
         }
         /* TABLES */
         .table-wrapper {
         overflow-x: auto;
         margin-top: 0;
         border-radius: 8px;
         }
         table {
         width: 100%;
         border-collapse: collapse;
         }
         .league-table {
         min-width: 600px;
         }
         /* Narrower table for scorers */
         .scorers-table-shell {
         position: relative;
         max-width: 100%;
         margin: 0 auto;
         border-radius: 10px;
         }
         .scorers-table-shell::before,
         .scorers-table-shell::after {
         content: "";
         position: absolute;
         left: 0;
         right: 0;
         height: 18px;
         pointer-events: none;
         z-index: 3;
         }
         .scorers-table-shell::before {
         top: 0;
         border-radius: 10px 10px 0 0;
         background: linear-gradient(to bottom, rgba(247, 250, 255, 0.95), rgba(247, 250, 255, 0));
         }
         .scorers-table-shell::after {
         bottom: 0;
         border-radius: 0 0 10px 10px;
         background: linear-gradient(to top, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0));
         }
         .scorers-table-wrapper {
         overflow-x: auto;
         overflow-y: auto;
         border-radius: 8px;
         max-height: 360px;
         border: 1px solid var(--card-border);
         background: #fff;
         }
         .scorers-table-wrapper::-webkit-scrollbar {
         width: 8px;
         height: 8px;
         }
         .scorers-table-wrapper::-webkit-scrollbar-thumb {
         background: rgba(11, 102, 184, 0.34);
         border-radius: 999px;
         }
         .scorers-table-wrapper::-webkit-scrollbar-track {
         background: rgba(148, 163, 184, 0.2);
         border-radius: 999px;
         }
         .scorers-table-wrapper table {
         min-width: 460px;
         }
         /* Center align scorers table headers */
         .scorers-table-wrapper table th {
         text-align: center;
         position: sticky;
         top: 0;
         z-index: 2;
         background: #f7faff;
         }
         th {
         background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
         padding: 16px 12px;
         text-align: left;
         font-size: 12px;
         font-weight: 700;
         color: #636e72;
         text-transform: uppercase;
         letter-spacing: 0.5px;
         border-bottom: 2px solid #e0e0e0;
         cursor: pointer;
         user-select: none;
         white-space: nowrap;
         transition: background 0.2s ease;
         }
         th:hover {
         background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
         }
         th.no-sort {
         cursor: default;
         }
         th.no-sort:hover {
         background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
         }
         th.sorted-asc::after {
         content: " ▲";
         font-size: 11px;
         color: var(--brand);
         }
         th.sorted-desc::after {
         content: " ▼";
         font-size: 11px;
         color: var(--brand);
         }
         td {
         padding: 16px 12px;
         border-bottom: 1px solid #f0f0f0;
         font-size: 14px;
         color: #2d3436;
         text-align: center;
         transition: background 0.2s ease;
         }
         .league-table th,
         .league-table td {
         padding: 12px 8px;
         }
         .league-table th:first-child,
         .league-table td:first-child {
         width: 44px;
         min-width: 44px;
         }
         .league-table th:nth-child(2),
         .league-table td:nth-child(2) {
         text-align: left;
         padding-left: 12px;
         min-width: 112px;
         }
         tbody tr:nth-child(even) {
         background: #fafafa;
         }
         tbody tr:hover {
         background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
         }
         tr.highlight {
         background: linear-gradient(135deg, #fff9e6 0%, #fffbf0 100%) !important;
         }
         tr.highlight:hover {
         background: linear-gradient(135deg, #fff5d6 0%, #fff9e0 100%) !important;
         }
         /* SCORER COLORS */
         tr.team-crveni {
         background: #fff5f5 !important;
         }
         tr.team-plavi {
         background: #f5f9ff !important;
         }
         tr.team-crveni:hover {
         background: #ffebeb !important;
         }
         tr.team-plavi:hover {
         background: #ebf3ff !important;
         }
         tr.team-crveni td:first-child {
         color: #d63031;
         font-weight: bold;
         }
         tr.team-plavi td:first-child {
         color: #0984e3;
         font-weight: bold;
         }
         /* BADGES */
         .captain-badge {
         display: inline-block;
         background: linear-gradient(135deg, #ffd700, #ffed4e);
         color: #333;
         font-weight: bold;
         padding: 3px 7px;
         border-radius: 4px;
         margin-left: 6px;
         font-size: 10px;
         box-shadow: 0 2px 4px rgba(0,0,0,0.15);
         }
         .goalkeeper-badge {
         margin-left: 6px;
         font-size: 16px;
         }
         /* FORM */
         .form-box {
         margin-top: 0;
         text-align: center;
         font-size: 17px;
         display: flex;
         flex-direction: column;
         gap: 20px;
         }
         .insights-grid {
         display: grid;
         grid-template-columns: repeat(3, minmax(0, 1fr));
         gap: 12px;
         }
         .insight-item {
         border: 1px solid #e2e8f0;
         border-radius: 12px;
         padding: 12px;
         background: linear-gradient(180deg, #ffffff 0%, #f8fbff 100%);
         }
         .insight-label {
         margin: 0 0 8px;
         font-size: 11px;
         text-transform: uppercase;
         letter-spacing: 0.05em;
         color: #64748b;
         font-weight: 700;
         }
         .insight-value {
         margin: 0;
         font-size: 15px;
         font-weight: 800;
         color: #0f172a;
         line-height: 1.35;
         }
         .insight-scoreline {
         display: inline-flex;
         align-items: center;
         gap: 8px;
         font-size: 18px;
         font-weight: 900;
         letter-spacing: -0.01em;
         color: var(--score-neutral);
         }
         .insight-team {
         font-size: 11px;
         font-weight: 700;
         padding: 3px 8px;
         border-radius: 999px;
         border: 1px solid #d8e4f5;
         color: #475569;
         background: #f8fbff;
         }
         .insight-sep {
         opacity: 0.7;
         font-weight: 700;
         }
         .insight-meta {
         display: block;
         margin-top: 4px;
         }
         .insight-value small {
         font-size: 11px;
         font-weight: 700;
         color: #64748b;
         }
         .form-row {
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 12px;
         }
         .form-team {
         font-weight: 600;
         min-width: 80px;
         text-align: right;
         }
         .form-dots {
         display: flex;
         gap: 8px;
         }
         .dot {
         width: 20px;
         height: 20px;
         border-radius: 50%;
         display: inline-block;
         box-shadow: 0 2px 6px rgba(0,0,0,0.15);
         transition: all 0.2s ease;
         cursor: pointer;
         }
         .dot:hover {
         transform: scale(1.3);
         box-shadow: 0 3px 8px rgba(0,0,0,0.25);
         }
         .win {
         background: linear-gradient(135deg, #00b894, #00d2a0);
         }
         .loss {
         background: linear-gradient(135deg, #ff4757, #ff6b7a);
         }
         .draw {
         background: linear-gradient(135deg, #fdcb6e, #ffeaa7);
         }
         /* BUTTONS */
         .more-btn {
         width: 100%;
         padding: 16px;
         border: none;
         border-radius: 10px;
         font-size: 15px;
         font-weight: 700;
         cursor: pointer;
         transition: all 0.3s ease;
         margin-top: 25px;
         text-transform: uppercase;
         letter-spacing: 1px;
         background: linear-gradient(135deg, #0b66b8 0%, #0ea5a6 100%);
         color: white;
         box-shadow: 0 8px 20px rgba(11, 102, 184, 0.2);
         }
         .more-btn:hover {
         box-shadow: 0 10px 24px rgba(11, 102, 184, 0.24);
         transform: translateY(-2px);
         background: linear-gradient(135deg, #095ca8 0%, #0c9597 100%);
         }
         .top-fab {
         position: fixed;
         right: 18px;
         bottom: 18px;
         width: 44px;
         height: 44px;
         border: none;
         border-radius: 999px;
         font-size: 20px;
         font-weight: 800;
         color: #fff;
         background: linear-gradient(135deg, #0b66b8 0%, #0ea5a6 100%);
         box-shadow: 0 10px 20px rgba(11, 102, 184, 0.25);
         cursor: pointer;
         opacity: 0;
         transform: translateY(8px);
         pointer-events: none;
         transition: all 0.25s ease;
         z-index: 1100;
         }
         .top-fab.show {
         opacity: 1;
         transform: translateY(0);
         pointer-events: auto;
         }
         a:focus-visible,
         button:focus-visible,
         .info-link:focus-visible {
         outline: 3px solid var(--focus);
         outline-offset: 2px;
         }
         /* MODAL */
         #modalOverlay {
         display: none;
         position: fixed;
         inset: 0;
         background: rgba(0, 0, 0, 0.7);
         justify-content: center;
         align-items: center;
         backdrop-filter: blur(4px);
         z-index: 999;
         padding: 20px;
         animation: fadeIn 0.3s ease;
         }
         @keyframes fadeIn {
         from { opacity: 0; }
         to { opacity: 1; }
         }
         #modalBox {
         background: white;
         padding: 0;
         border-radius: 16px;
         width: 90%;
         max-width: 600px;
         box-shadow: 0 24px 70px rgba(15, 23, 42, 0.28);
         border: 1px solid rgba(220, 231, 245, 0.95);
         animation: slideUp 0.3s ease;
         max-height: 90vh;
         overflow: hidden;
         display: flex;
         flex-direction: column;
         }
         @keyframes slideUp {
         from {
         transform: translateY(50px);
         opacity: 0;
         }
         to {
         transform: translateY(0);
         opacity: 1;
         }
         }
         .modal-head {
         position: sticky;
         top: 0;
         z-index: 5;
         display: flex;
         align-items: center;
         justify-content: space-between;
         gap: 12px;
         padding: 16px 18px;
         border-bottom: 1px solid #e8eef7;
         background: linear-gradient(180deg, #ffffff 0%, #f7faff 100%);
         }
         #modalBox h2 {
         margin: 0;
         color: #2d3436;
         text-align: left;
         font-size: 22px;
         line-height: 1.2;
         }
         #closeModal {
         cursor: pointer;
         display: inline-flex;
         align-items: center;
         justify-content: center;
         width: 36px;
         height: 36px;
         border-radius: 999px;
         border: 1px solid #dbe5f4;
         background: #fff;
         font-size: 22px;
         color: #334155;
         line-height: 1;
         transition: all 0.3s ease;
         flex-shrink: 0;
         }
         #closeModal:hover {
         color: #0b66b8;
         border-color: #b8d1f0;
         transform: rotate(90deg) scale(1.04);
         }
         #modalContent {
         padding: 0 16px 16px;
         overflow-y: auto;
         max-height: calc(90vh - 74px);
         line-height: normal;
         white-space: normal;
         text-align: left;
         }
         .scorer-item {
         display: flex;
         align-items: center;
         justify-content: space-between;
         padding: 5px 8px;     /* +1px vertikalno */
         margin: 2px 0;       /* +1px između redova */
         font-size: 13px;
         font-weight: 500;
         line-height: 1.15;   /* mrvicu rasterećenje */
         border-radius: 4px;
         }
         .scorer-item:hover {
         background-color: rgba(0,0,0,0.02);
         }
         .scorer-item.red {
         background: #fff5f5;
         color: #d63031;
         border-left: 2px solid #d63031;
         }
         .scorer-item.blue {
         background: #f5f9ff;
         color: #0984e3;
         border-left: 2px solid #0984e3;
         }
         /* MOBILE RESPONSIVE */
         @media (max-width: 768px) {
         body {
         padding: 15px 10px;
         }
         .container {
         max-width: 100%;
         }
         header {
         padding: 20px 25px;
         border-radius: 12px;
         margin-bottom: 25px;
         }
         .logo {
         font-size: 26px;
         margin-bottom: 15px;
         }
         .header-nav {
         gap: 10px;
         }
         .team-link {
         flex: 1;
         min-width: 110px;
         justify-content: center;
         font-size: 13px;
         padding: 10px 14px;
         }
         .main-match-teams .team-logo {
         width: 120px;
         height: 120px;
         }
         .insights-grid {
         grid-template-columns: 1fr;
         }
         #loginBtn {
         width: 100%;
         text-align: center;
         padding: 12px;
         }
         .card {
         border-radius: 12px;
         margin-bottom: 25px;
         }
         .card-header {
         padding: 20px 25px 16px;
         }
         .card-content {
         padding: 25px;
         }
         h1, h2 {
         font-size: 20px;
         }
         .match-box {
         padding: 20px;
         }
         .recent-matches-content .match-box {
         padding: 18px 0;
         }
         .match-info {
         margin-bottom: 15px;
         }
         .match-links {
         gap: 6px;
         margin-top: 10px;
         }
         .info-link {
         font-size: 11px;
         padding: 5px 12px;
         }
         .team-logo {
         width: 90px;
         height:90px;
         }
         .team-name {
         font-size: 13px;
         margin-top: 6px;
         }
         .score {
         font-size: 30px;
         }
         .score-small {
         font-size: 22px;
         }
         /* Hide less important columns on mobile for league table */
         /* Sakrij sekundarne kolone */
         .league-table th:nth-child(3),
         .league-table td:nth-child(3), /* Utakmice */
         .league-table th:nth-child(5),
         .league-table td:nth-child(5), /* Nerešeno */
         .league-table th:nth-child(7),
         .league-table td:nth-child(7), /* Dati */
         .league-table th:nth-child(8),
         .league-table td:nth-child(8) { /* Primljeni */
         display: none;
         }
         .league-table {
         min-width: 100%;
         table-layout: fixed;
         }
         .scorers-table-wrapper table {
         min-width: 430px;
         }
         .scorers-table-wrapper {
         max-height: 300px;
         }
         th, td {
         padding: 10px 6px;
         font-size: 11px;
         }
         th {
         padding: 12px 8px;
         }
         .form-box {
         font-size: 15px;
         gap: 15px;
         }
         .form-team {
         min-width: 70px;
         font-size: 15px;
         }
         .form-dots {
         gap: 6px;
         }
         .dot {
         width: 18px;
         height: 18px;
         }
         .more-btn {
         padding: 14px;
         margin-top: 20px;
         font-size: 14px;
         }
         #modalBox {
         padding: 0;
         width: 95%;
         }
         #modalBox h2 {
         font-size: 19px;
         }
         #closeModal {
         width: 34px;
         height: 34px;
         font-size: 20px;
         }
         .scorer-item {
         font-size: 14px;
         padding: 10px 14px;
         }
         }
         @media (max-width: 480px) {
         body {
         padding: 12px 8px;
         }
         header {
         padding: 18px 20px;
         }
         .logo {
         font-size: 24px;
         }
         .card {
         border-radius: 12px;
         margin-bottom: 20px;
         }
         .card-header {
         padding: 18px 20px 14px;
         }
         .card-content {
         padding: 20px;
         }
         h1, h2 {
         font-size: 18px;
         }
         .match-box {
         padding: 16px;
         }
         .recent-matches-content .match-box {
         padding: 15px 0;
         }
         .team-logo {
         width: 50px;
         height: 50px;
         }
         .score {
         font-size: 26px;
         }
         .league-table {
         min-width: 100%;
         table-layout: fixed;
         }
         .scorers-table-wrapper table {
         min-width: 380px;
         }
         .scorers-table-wrapper {
         max-height: 260px;
         }
         th, td {
         padding: 8px 4px;
         font-size: 10px;
         }
         th {
         padding: 10px 6px;
         }
         .league-table th,
         .league-table td {
         padding: 8px 5px;
         }
         .league-table th:first-child,
         .league-table td:first-child {
         width: 34px;
         min-width: 34px;
         }
         .league-table th:nth-child(2),
         .league-table td:nth-child(2) {
         min-width: 92px;
         padding-left: 8px;
         }
         .captain-badge {
         font-size: 8px;
         padding: 2px 5px;
         }
         .goalkeeper-badge {
         font-size: 14px;
         }
         .form-box {
         font-size: 14px;
         gap: 12px;
         }
         .form-team {
         min-width: 60px;
         font-size: 14px;
         }
         .dot {
         width: 16px;
         height: 16px;
         }
         .main-match-teams,
         .recent-match-teams {
         gap: 10px;
         }
         }
         @media (max-width: 640px) {
         .main-match-teams,
         .recent-match-teams {
         flex-wrap: nowrap;
         justify-content: space-between;
         }
         .main-match-teams .score,
         .recent-match-teams .score-small {
         width: auto;
         text-align: center;
         min-width: 76px;
         }
         .main-match-teams .team-col,
         .recent-match-teams .team-col {
         flex: 1;
         min-width: 0;
         }
         .main-match-teams .team-logo,
         .recent-match-teams .team-logo {
         width: clamp(62px, 24vw, 110px) !important;
         height: clamp(62px, 24vw, 110px) !important;
         }
         }
         @media (max-width: 360px) {
         .main-match-teams,
         .recent-match-teams {
         gap: 4px;
         }
         .main-match-teams .team-logo,
         .recent-match-teams .team-logo {
         width: 58px !important;
         height: 58px !important;
         }
         .main-match-teams .team-name,
         .recent-match-teams .team-name {
         font-size: 12px;
         margin-top: 4px;
         }
         .main-match-teams .score {
         font-size: 22px;
         min-width: 62px;
         }
         .recent-match-teams .score-small {
         font-size: 19px;
         min-width: 62px;
         }
         .match-box {
         padding: 12px;
         }
         .match-info {
         margin-bottom: 10px;
         font-size: 12px;
         }
         .match-links {
         gap: 4px;
         }
         .info-link {
         font-size: 10px;
         padding: 4px 8px;
         min-height: 30px;
         }
         .scorers-table-wrapper {
         max-height: 220px;
         }
         .quick-pill {
         font-size: 11px;
         padding: 5px 8px;
         }
         .top-fab {
         right: 12px;
         bottom: 12px;
         width: 40px;
         height: 40px;
         font-size: 18px;
         }
         }
         /* === UNIFIED SECTION SPACING === */
         header {
         margin-bottom: 28px;
         }
         .card {
         margin-bottom: 28px;
         }
         @media (max-width: 768px) {
         header {
         margin-bottom: 22px;
         }
         .card {
         margin-bottom: 22px;
         }
         }
         @media (max-width: 480px) {
         header {
         margin-bottom: 18px;
         }
         .card {
         margin-bottom: 18px;
         }
         }
         @media (prefers-reduced-motion: reduce) {
         * {
         animation: none !important;
         transition: none !important;
         scroll-behavior: auto !important;
         }
         }
         @keyframes riseIn {
         from { opacity: 0; transform: translateY(12px); }
         to { opacity: 1; transform: translateY(0); }
         }
         /* === Redesign V2 === */
         header {
         border-radius: 22px;
         border: 1px solid rgba(220, 231, 245, 0.9);
         box-shadow: 0 20px 46px rgba(15, 23, 42, 0.12);
         }
         .logo {
         letter-spacing: -0.02em;
         }
         .hero-subtitle {
         font-size: 14px;
         line-height: 1.55;
         max-width: 620px;
         margin-left: auto;
         margin-right: auto;
         }
         .team-link {
         border-radius: 14px;
         min-height: 44px;
         }
         .quick-pill {
         border-radius: 12px;
         min-height: 34px;
         display: inline-flex;
         align-items: center;
         }
         .card {
         border-radius: 22px;
         box-shadow: 0 18px 42px rgba(15, 23, 42, 0.1);
         }
         .card-header {
         text-align: left;
         font-size: clamp(1.1rem, 1.6vw, 1.35rem);
         letter-spacing: -0.01em;
         padding: 20px 24px;
         }
         .card-header::after {
         margin: 8px 0 0;
         }
         .card-content {
         padding: 24px;
         }
         .match-box {
         border-radius: 14px;
         }
         .table-wrapper,
         .scorers-table-shell {
         border-radius: 12px;
         }
         th {
         font-size: 11px;
         letter-spacing: 0.04em;
         }
         td {
         font-size: 14px;
         }
         .info-link {
         border-radius: 10px;
         font-weight: 700;
         }
         .more-btn {
         border-radius: 14px;
         min-height: 48px;
         letter-spacing: 0.03em;
         }
         #modalBox {
         border-radius: 18px;
         }
         .modal-head {
         padding: 14px 16px;
         }
         #modalContent {
         padding: 0 16px 16px;
         }
         .modal-subtitle {
         margin: 0;
         font-size: 12px;
         font-weight: 600;
         color: #64748b;
         letter-spacing: 0.05em;
         text-transform: uppercase;
         }
         .modal-tabs-shell {
         position: sticky;
         top: 0;
         z-index: 3;
         margin: 6px -16px 12px;
         padding: 0 16px 10px;
         background: #ffffff;
         border-bottom: 1px solid #e8eef7;
         box-shadow: 0 6px 12px rgba(15, 23, 42, 0.06);
         }
         .modal-tabs {
         display: flex;
         flex-wrap: nowrap;
         gap: 8px;
         overflow-x: auto;
         padding-bottom: 2px;
         }
         .modal-tabs::-webkit-scrollbar {
         height: 4px;
         }
         .modal-tabs::-webkit-scrollbar-thumb {
         background: rgba(148, 163, 184, 0.45);
         border-radius: 999px;
         }
         .modal-tab {
         border: 1px solid #d8e4f5;
         background: #f6faff;
         color: #325072;
         display: inline-flex;
         align-items: center;
         justify-content: center;
         min-height: 32px;
         min-width: 86px;
         padding: 6px 10px;
         border-radius: 10px;
         font-size: 12px;
         font-weight: 700;
         cursor: pointer;
         transition: all 0.2s ease;
         white-space: nowrap;
         }
         .modal-tab:hover {
         background: #eaf3ff;
         border-color: #c8dbf6;
         }
         .modal-tab.active {
         background: linear-gradient(135deg, #0b66b8 0%, #0ea5a6 100%);
         border-color: transparent;
         color: #fff;
         box-shadow: 0 6px 16px rgba(11, 102, 184, 0.25);
         }
         .modal-panel {
         animation: modalPanelIn 0.18s ease;
         }
         @keyframes modalPanelIn {
         from {
         opacity: 0;
         transform: translateY(6px);
         }
         to {
         opacity: 1;
         transform: translateY(0);
         }
         }
         .modal-info-card {
         border: 1px solid #e3ecf9;
         border-radius: 12px;
         background: linear-gradient(180deg, #ffffff 0%, #f7fbff 100%);
         padding: 14px;
         color: #1f2937;
         line-height: 1.6;
         white-space: pre-line;
         }
         .modal-empty {
         margin: 0;
         text-align: center;
         color: #64748b;
         background: #f8fbff;
         border: 1px dashed #d8e4f5;
         border-radius: 12px;
         padding: 14px;
         font-weight: 600;
         }
         .modal-section {
         margin-bottom: 14px;
         }
         .modal-section:last-child {
         margin-bottom: 0;
         }
         .modal-section-title {
         margin: 0 0 8px;
         font-size: 13px;
         font-weight: 800;
         letter-spacing: 0.04em;
         text-transform: uppercase;
         }
         .modal-section-title.red {
         color: #b91c1c;
         }
         .modal-section-title.blue {
         color: #0369a1;
         }
         .lineup-grid {
         display: grid;
         gap: 10px;
         }
         .lineup-card {
         border: 1px solid #e3ecf9;
         border-radius: 12px;
         padding: 12px;
         background: #f9fcff;
         }
         .lineup-card.red {
         border-color: #f2d8d8;
         background: linear-gradient(180deg, #fffafa 0%, #fffdfd 100%);
         }
         .lineup-card.blue {
         border-color: #d8e7f7;
         background: linear-gradient(180deg, #f7fbff 0%, #fbfdff 100%);
         }
         .lineup-unified-card {
         border: 1px solid #e3ecf9;
         border-radius: 12px;
         padding: 12px;
         background: #f9fcff;
         }
         .lineup-pitch {
         position: relative;
         width: 100%;
         max-width: 380px;
         margin: 0 auto;
         aspect-ratio: 2 / 3;
         background: url('field.png') center / cover no-repeat;
         border-radius: 12px;
         border: 1px solid rgba(148, 163, 184, 0.35);
         box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.55);
         overflow: hidden;
         }
         .lineup-pitch.unified {
         max-width: 420px;
         }
         .lineup-node {
         position: absolute;
         transform: translate(-50%, -50%);
         display: flex;
         flex-direction: column;
         align-items: center;
         gap: 4px;
         max-width: 34%;
         }
         .lineup-dot {
         width: 20px;
         height: 20px;
         border-radius: 999px;
         border: 2px solid #ffffff;
         box-shadow: 0 3px 8px rgba(15, 23, 42, 0.28);
         }
         .lineup-node.red .lineup-dot {
         background: radial-gradient(circle at 30% 30%, #ff7d7d, #d63031 62%);
         }
         .lineup-node.blue .lineup-dot {
         background: radial-gradient(circle at 30% 30%, #74b6ff, #0984e3 62%);
         }
         .lineup-card.red .lineup-dot {
         background: radial-gradient(circle at 30% 30%, #ff7d7d, #d63031 62%);
         }
         .lineup-card.blue .lineup-dot {
         background: radial-gradient(circle at 30% 30%, #74b6ff, #0984e3 62%);
         }
         .lineup-label {
         font-size: 10px;
         font-weight: 700;
         line-height: 1.2;
         padding: 3px 6px;
         border-radius: 999px;
         color: #0f172a;
         background: rgba(255, 255, 255, 0.93);
         border: 1px solid rgba(203, 213, 225, 0.85);
         box-shadow: 0 2px 6px rgba(15, 23, 42, 0.12);
         text-align: center;
         max-width: 100%;
         overflow: hidden;
         text-overflow: ellipsis;
         white-space: nowrap;
         }
         .lineup-node.red .lineup-label {
         border-color: rgba(254, 205, 211, 0.9);
         background: rgba(255, 241, 242, 0.95);
         }
         .lineup-node.blue .lineup-label {
         border-color: rgba(191, 219, 254, 0.95);
         background: rgba(239, 246, 255, 0.95);
         }
         .lineup-node.gk  { top: 88%; left: 50%; }
         .lineup-node.lb  { top: 62%; left: 18%; }
         .lineup-node.cb1 { top: 62%; left: 38%; }
         .lineup-node.cb2 { top: 62%; left: 62%; }
         .lineup-node.rb  { top: 62%; left: 82%; }
         .lineup-node.r-gk { top: 12%; left: 50%; }
         .lineup-node.r-dl { top: 28%; left: 35%; }
         .lineup-node.r-dr { top: 28%; left: 65%; }
         .lineup-node.r-fl { top: 44%; left: 35%; }
         .lineup-node.r-fr { top: 44%; left: 65%; }
         .lineup-node.b-gk { top: 88%; left: 50%; }
         .lineup-node.b-dl { top: 72%; left: 35%; }
         .lineup-node.b-dr { top: 72%; left: 65%; }
         .lineup-node.b-fl { top: 56%; left: 35%; }
         .lineup-node.b-fr { top: 56%; left: 65%; }
         .lineup-half-label {
         position: absolute;
         font-size: 11px;
         font-weight: 800;
         padding: 4px 8px;
         border-radius: 999px;
         background: rgba(255, 255, 255, 0.92);
         border: 1px solid rgba(203, 213, 225, 0.9);
         box-shadow: 0 2px 6px rgba(15, 23, 42, 0.12);
         }
         .lineup-half-label.red {
         top: 8px;
         left: 8px;
         color: #b91c1c;
         }
         .lineup-half-label.blue {
         bottom: 8px;
         right: 8px;
         color: #0369a1;
         }
         .lineup-bench-grid {
         display: grid;
         gap: 8px;
         margin-top: 10px;
         }
         .lineup-bench-team {
         border: 1px solid #e2e8f0;
         border-radius: 10px;
         padding: 8px;
         background: #fff;
         }
         .lineup-bench-team.red {
         border-color: #fecdd3;
         background: #fff5f6;
         }
         .lineup-bench-team.blue {
         border-color: #bfdbfe;
         background: #f0f7ff;
         }
         .lineup-bench-team.red .bench-chip {
         border-color: #fecdd3;
         background: #fff1f2;
         color: #b91c1c;
         }
         .lineup-bench-team.blue .bench-chip {
         border-color: #bfdbfe;
         background: #eff6ff;
         color: #075985;
         }
         .lineup-bench {
         margin-top: 10px;
         }
         .lineup-bench-title {
         margin: 0 0 6px;
         font-size: 11px;
         font-weight: 700;
         color: #64748b;
         text-transform: uppercase;
         letter-spacing: 0.04em;
         }
         .bench-list {
         display: flex;
         flex-wrap: wrap;
         gap: 6px;
         }
         .bench-chip {
         display: inline-flex;
         align-items: center;
         min-height: 26px;
         padding: 4px 8px;
         border-radius: 999px;
         font-size: 11px;
         font-weight: 600;
         border: 1px solid #d7e3f4;
         background: #ffffff;
         color: #334155;
         }
         .scorer-item {
         border-radius: 10px;
         padding: 9px 10px;
         margin: 5px 0;
         border-left-width: 3px;
         font-size: 13px;
         }
         .scorer-count {
         display: inline-flex;
         align-items: center;
         justify-content: center;
         min-width: 62px;
         padding: 5px 8px;
         border-radius: 999px;
         border: 1px solid rgba(148, 163, 184, 0.35);
         background: rgba(255, 255, 255, 0.88);
         color: #0f172a;
         font-weight: 700;
         font-size: 12px;
         white-space: nowrap;
         }
         .scorers-list {
         display: flex;
         flex-wrap: wrap;
         gap: 8px;
         }
         .scorer-row {
         display: inline-flex;
         align-items: center;
         gap: 8px;
         padding: 7px 10px;
         border-radius: 999px;
         border: 1px solid #dbe4f0;
         background: #fff;
         min-height: 34px;
         max-width: 100%;
         }
         .scorer-row.red {
         background: #fff1f2;
         border-color: #fecdd3;
         }
         .scorer-row.blue {
         background: #eff6ff;
         border-color: #bfdbfe;
         }
         .scorer-main {
         min-width: 0;
         display: inline-flex;
         align-items: center;
         gap: 6px;
         }
         .scorer-name {
         font-size: 12px;
         font-weight: 700;
         color: #0f172a;
         line-height: 1;
         white-space: nowrap;
         }         .scorer-goals {
         min-width: 34px;
         display: inline-flex;
         align-items: center;
         justify-content: center;
         padding: 2px 7px;
         border-radius: 999px;
         font-size: 11px;
         font-weight: 800;
         color: #0f172a;
         border: 1px solid rgba(148, 163, 184, 0.4);
         background: rgba(255, 255, 255, 0.85);
         }
         .scorer-goals.red {
         color: #b91c1c;
         border-color: #fecaca;
         background: #fff1f2;
         }
         .scorer-goals.blue {
         color: #075985;
         border-color: #bfdbfe;
         background: #eff6ff;
         }
         .own-goal-note {
         margin-top: 10px;
         border: 1px dashed #f8b4b4;
         background: #fff7f7;
         color: #9f1239;
         border-radius: 12px;
         padding: 10px 12px;
         font-size: 12px;
         font-weight: 700;
         }
         @media (max-width: 768px) {
         .card,
         header {
         border-radius: 16px;
         }
         .card-content {
         padding: 18px;
         }
         .card-header {
         padding: 16px 18px;
         }
         .hero-subtitle {
         font-size: 13px;
         }
         .modal-tab {
         font-size: 11px;
         min-height: 28px;
         min-width: 78px;
         }
         .modal-tabs-shell {
         margin-bottom: 10px;
         }
         .scorer-item {
         padding: 8px 9px;
         }
         .scorer-count {
         min-width: 58px;
         padding: 4px 7px;
         font-size: 11px;
         }
         .scorer-goals {
         min-width: 32px;
         padding: 2px 6px;
         }
         .lineup-grid {
         gap: 8px;
         }
         .lineup-pitch {
         max-width: 100%;
         }
         .lineup-label {
         font-size: 9px;
         padding: 3px 5px;
         }
         .lineup-dot {
         width: 18px;
         height: 18px;
         }
         .lineup-half-label {
         font-size: 10px;
         padding: 3px 7px;
         }
         }
         @media (min-width: 640px) {
         .lineup-grid {
         grid-template-columns: 1fr 1fr;
         }
         }
         body.theme-dark {
         --bg-a: #0b1220;
         --bg-b: #0f172a;
         --ink: #e2e8f0;
         --muted: #94a3b8;
         --card-border: #243244;
         --ring: rgba(14, 165, 166, 0.18);
         --score-neutral: #f8fafc;
         }
         body.theme-dark header,
         body.theme-dark .card,
         body.theme-dark .match-box,
         body.theme-dark #modalBox,
         body.theme-dark .scorers-table-wrapper,
         body.theme-dark .lineup-unified-card,
         body.theme-dark .lineup-bench-team,
         body.theme-dark .modal-tabs-shell,
         body.theme-dark .modal-info-card,
         body.theme-dark .insight-item {
         background: #111b2e;
         border-color: #2b3a50;
         color: #dbe7f4;
         }
         body.theme-dark .card-header,
         body.theme-dark .modal-head {
         background: linear-gradient(180deg, #111b2e 0%, #0f172a 100%);
         border-color: #2b3a50;
         }
         body.theme-dark th {
         background: #182339;
         border-bottom-color: #3a4b64;
         color: #c8d7ea;
         }
         body.theme-dark td {
         border-bottom-color: #2a3a4f;
         color: #e2e8f0;
         }
         body.theme-dark tbody tr:nth-child(even) {
         background: #141f33;
         }
         body.theme-dark tbody tr:hover {
         background: #1a2a42;
         }
         body.theme-dark .scorers-table-wrapper table th {
         background: #182339;
         }
         body.theme-dark .scorers-table-shell::before {
         background: linear-gradient(to bottom, rgba(17, 27, 46, 0.96), rgba(17, 27, 46, 0));
         }
         body.theme-dark .scorers-table-shell::after {
         background: linear-gradient(to top, rgba(17, 27, 46, 0.98), rgba(17, 27, 46, 0));
         }
         body.theme-dark tr.team-crveni {
         background: #2a1c28 !important;
         }
         body.theme-dark tr.team-plavi {
         background: #172739 !important;
         }
         body.theme-dark tr.team-crveni:hover {
         background: #312131 !important;
         }
         body.theme-dark tr.team-plavi:hover {
         background: #1d2e44 !important;
         }
         body.theme-dark tr.highlight {
         background: #2f2a1f !important;
         }
         body.theme-dark tr.highlight:hover {
         background: #3a3224 !important;
         }
         body.theme-dark #themeToggle {
         background: #0f1a2c;
         border-color: #355276;
         color: #9ad4ff;
         }
         body.theme-dark #themeToggle:hover {
         background: #1178c8;
         color: #fff;
         }
         body.theme-dark .insight-label,
         body.theme-dark .match-info,
         body.theme-dark .modal-subtitle,
         body.theme-dark .lineup-bench-title {
         color: #9fb3c8;
         }
         body.theme-dark .insight-value,
         body.theme-dark .scorer-name,
         body.theme-dark #modalBox h2 {
         color: #e2e8f0;
         }
         body.theme-dark .insight-team {
         background: #142136;
         border-color: #355276;
         color: #cbd5e1;
         }
         body.theme-dark .info-link,
         body.theme-dark .quick-pill {
         background: #142136;
         color: #9ad4ff;
         border-color: #355276;
         }
         body.theme-dark .info-link:hover,
         body.theme-dark .quick-pill:hover {
         background: #1178c8;
         color: #fff;
         }
         body.theme-dark .modal-tab {
         background: #142136;
         border-color: #355276;
         color: #b9d6f2;
         }
         body.theme-dark .modal-tab:hover {
         background: #1a2b43;
         }
         body.theme-dark .modal-empty {
         background: #0f1a2c;
         border-color: #355276;
         color: #9fb3c8;
         }
         body.theme-dark .scorers-table-wrapper td:nth-child(3) {
         color: #f8fafc;
         }
         body.theme-dark .scorers-table-wrapper td:nth-child(4) {
         color: #cbd5e1;
         }
         body.theme-dark .scorer-row {
         background: #16243a;
         border-color: #355276;
         }
         body.theme-dark .scorer-row.red {
         background: #2a1c28;
         border-color: #7f2f44;
         }
         body.theme-dark .scorer-row.blue {
         background: #172739;
         border-color: #315679;
         }
         body.theme-dark .scorer-goals {
         background: #0f1a2c;
         color: #dbe7f4;
         border-color: #355276;
         }
         body.theme-dark .scorer-goals.red {
         color: #fecdd3;
         border-color: #7f2f44;
         background: #2a1c28;
         }
         body.theme-dark .scorer-goals.blue {
         color: #bfdbfe;
         border-color: #315679;
         background: #172739;
         }
         body.theme-dark .own-goal-note {
         background: #2a1c28;
         border-color: #7f2f44;
         color: #fecdd3;
         }
         body.theme-dark .lineup-bench-team.red .bench-chip {
         background: #2a1c28;
         border-color: #7f2f44;
         color: #fecdd3;
         }
         body.theme-dark .lineup-bench-team.blue .bench-chip {
         background: #172739;
         border-color: #315679;
         color: #bfdbfe;
         }
      </style>
   </head>
   <body>
      <div class="container">
         <!-- HEADER -->
         <header>
            <div class="logo">Fudbalski Rezultati</div>
            <div class="hero-subtitle">
               Pregled rezultata, strelaca i sastava po utakmicama
            </div>
            <div class="header-nav">
               <a href="crveni.html" class="team-link red">🔴 Vidi ekipu – Crveni</a>
               <a href="plavi.html" class="team-link blue">🔵 Vidi ekipu – Plavi</a>
            </div>
            <div class="header-actions">
               <button id="themeToggle" type="button" aria-label="Promeni temu">🌙 Dark</button>
            </div>
         </header>
         <!-- MAIN MATCH -->
         <div class="card" id="latestCard">
            <h1 class="card-header">Rezultat poslednjeg kola</h1>
            <div class="card-content">
               <div id="mainMatch"></div>
            </div>
         </div>
         <!-- BRZI UVID -->
         <div class="card" id="insightsCard">
            <h2 class="card-header">Brzi uvid</h2>
            <div class="card-content">
               <div class="insights-grid" id="insightsGrid"></div>
            </div>
         </div>
         <!-- TABELA -->
         <div class="card" id="tableCard">
            <h2 class="card-header">Tabela</h2>
            <div class="card-content">
               <div class="table-wrapper">
                  <table class="league-table">
                     <thead>
                        <tr>
                           <th class="no-sort">#</th>
                           <th class="no-sort">Tim</th>
                           <th data-sort="U" data-table="league">Utakmice</th>
                           <th data-sort="P" data-table="league">Pobede</th>
                           <th data-sort="N" data-table="league">Nerešeno</th>
                           <th data-sort="I" data-table="league">Porazi</th>
                           <th data-sort="GD" data-table="league">Dati</th>
                           <th data-sort="GP" data-table="league">Primljeni</th>
                           <th data-sort="GR" data-table="league">Razlika</th>
                           <th data-sort="B" data-table="league">Bodovi</th>
                        </tr>
                     </thead>
                     <tbody id="leagueBody"></tbody>
                  </table>
               </div>
            </div>
         </div>
         <!-- LISTA STRELACA -->
         <div class="card" id="scorersCard">
            <h2 class="card-header">Lista strelaca</h2>
            <div class="card-content">
               <div class="scorers-table-shell">
                  <div class="scorers-table-wrapper">
                     <table>
                        <thead>
                           <tr>
                              <th data-sort="name" data-table="scorers">Ime</th>
                              <th data-sort="team" data-table="scorers">Tim</th>
                              <th data-sort="goals" data-table="scorers">Golovi</th>
                              <th data-sort="matches" data-table="scorers">Utakmice</th>
                           </tr>
                        </thead>
                        <tbody id="scorersBody"></tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
         <!-- FORMA -->
         <div class="card" id="formCard">
            <h2 class="card-header">Forma poslednjih 5 mečeva</h2>
            <div class="card-content">
               <div class="form-box" id="formBox"></div>
            </div>
         </div>
         <!-- RECENT MATCHES -->
         <div id="recentMatches"></div>
      </div>
      <button id="topFab" class="top-fab" type="button" aria-label="Nazad na vrh">↑</button>
      <!-- MODAL -->
      <div id="modalOverlay">
         <div id="modalBox">
            <div class="modal-head">
               <h2 id="modalTitle">Info o meču</h2>
               <button id="closeModal" type="button" aria-label="Zatvori dijalog">✕</button>
            </div>
            <div id="modalContent"></div>
         </div>
      </div>
      <script type="module">
         import { onValue } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
         
         let allMatches = [];
         let allPlayers = { crveni: {}, plavi: {} };
         let tableData = {};
         let scorersData = [];
         const THEME_KEY = "termin_theme";
         let currentSort = {
           league: { field: 'B', dir: 'desc' },
           scorers: { field: 'goals', dir: 'desc' }
         };
                  
         function escapeHtml(value) {
           return String(value ?? "").replace(/[&<>"']/g, char => ({
             "&": "&amp;",
             "<": "&lt;",
             ">": "&gt;",
             '"': "&quot;",
             "'": "&#39;"
           }[char]));
         }

         const MONTHS_SHORT_SR = ["jan", "feb", "mar", "apr", "maj", "jun", "jul", "avg", "sep", "okt", "nov", "dec"];

         function formatMatchDate(dateValue) {
           const raw = String(dateValue || "").trim();
           const isoMatch = raw.match(/^(\d{4})-(\d{2})-(\d{2})$/);
           if (!isoMatch) return raw;

           const year = Number(isoMatch[1]);
           const month = Number(isoMatch[2]);
           const day = Number(isoMatch[3]);
           if (!year || month < 1 || month > 12 || day < 1 || day > 31) return raw;

           return `${day}. ${MONTHS_SHORT_SR[month - 1]} ${year}`;
         }

         function formatMatchTime(timeValue) {
           const raw = String(timeValue || "").trim();
           const timeMatch = raw.match(/^(\d{1,2}):(\d{2})$/);
           if (!timeMatch) return raw;

           const hours = Number(timeMatch[1]);
           const minutes = timeMatch[2];
           if (Number.isNaN(hours)) return raw;
           if (minutes === "00") return `${hours}h`;
           return `${hours}:${minutes}h`;
         }

         function formatMatchMeta(round, dateValue, timeValue) {
           const parts = [];
           parts.push(`Kolo ${escapeHtml(round)}`);

           const niceDate = formatMatchDate(dateValue);
           if (niceDate) parts.push(escapeHtml(niceDate));

           const niceTime = formatMatchTime(timeValue);
           if (niceTime) parts.push(escapeHtml(niceTime));

           return parts.join(" · ");
         }

         function applyTheme(theme) {
           const isDark = theme === "dark";
           document.body.classList.toggle("theme-dark", isDark);
           const btn = document.getElementById("themeToggle");
           if (btn) {
             btn.textContent = isDark ? "☀️ Light" : "🌙 Dark";
             btn.setAttribute("aria-label", isDark ? "Prebaci na svetlu temu" : "Prebaci na tamnu temu");
           }
         }

         function initThemeToggle() {
           const btn = document.getElementById("themeToggle");
           if (!btn) return;

           let initial = "light";
           try {
             const saved = localStorage.getItem(THEME_KEY);
             if (saved === "dark" || saved === "light") {
               initial = saved;
             } else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
               initial = "dark";
             }
           } catch (_) {}

           applyTheme(initial);

           btn.addEventListener("click", () => {
             const next = document.body.classList.contains("theme-dark") ? "light" : "dark";
             applyTheme(next);
             try {
               localStorage.setItem(THEME_KEY, next);
             } catch (_) {}
           });
         }
         
         /* -------- FORMAT PLAYER NAME -------- */
         function formatPlayerName(name) {
           if (!name) return '';
         
           let displayName = name;
           let badges = '';
         
           const captainRegex = /\s*\(c\)\s*/i;
           if (captainRegex.test(name)) {
             displayName = name.replace(captainRegex, ' ').trim();
             badges += '<span class="captain-badge">C</span>';
           }
         
           const goalkeeperRegex = /\s*\(g\)\s*/i;
           if (goalkeeperRegex.test(name)) {
             displayName = name.replace(goalkeeperRegex, ' ').trim();
             badges += '<span class="goalkeeper-badge">🧤</span>';
           }
         
           return escapeHtml(displayName) + badges;
         }
         
         /* LOAD MATCHES */
         onValue(window.dbRef("matches"), snap => {
           const data = snap.val() || {};
           allMatches = Object.values(data).sort((a,b)=>b.timestamp - a.timestamp);
         
           renderMainAndRecent(allMatches);
           renderHighlights(allMatches);
           calculateTable(allMatches);
           renderTable();
           renderForm(allMatches);
         });
         
         /* LOAD PLAYERS FOR SCORERS */
         onValue(window.dbRef("players"), snap => {
           const players = snap.val() || {};
           allPlayers = players || { crveni: {}, plavi: {} };
           scorersData = [];
         
           ['crveni', 'plavi'].forEach(team => {
             if (players[team]) {
               Object.entries(players[team]).forEach(([id, player]) => {
                 const goals = Number(player.goals) || 0;
                 const matches = Number(player.matches) || 0;
                 if (goals >= 1) {
                   scorersData.push({
                     name: player.name || '',
                     team: team === 'crveni' ? 'Crveni' : 'Plavi',
                     teamKey: team,
                     goals: goals,
                     matches: matches
                   });
                 }
               });
             }
           });
         
           renderScorers();
         });
         
         /* -------- MAIN MATCH + RECENT (DOLE) -------- */
         function renderMainAndRecent(matches) {
           const mainBox = document.getElementById("mainMatch");
           const recentBox = document.getElementById("recentMatches");
         
           mainBox.innerHTML = "";
           recentBox.innerHTML = "";
         
           if (!matches.length) return;
         
           const latest = matches[0];
         
           const matchLinks = `
         ${latest.info ? `<button type="button" class="info-link" onclick="openMatchInfo(0)">ℹ️ Info</button>` : ""}
         <button type="button" class="info-link" onclick="openMatchScorers(0)">⚽ Strelci</button>
         <button type="button" class="info-link" onclick="openMatchLineup(0)">🧍 Sastavi</button>
         `;
         
         
           mainBox.innerHTML = `
             <div class="match-box">
               <div class="match-info">
                 ${formatMatchMeta(latest.round, latest.date, latest.time)}
                 <div class="match-links">${matchLinks}</div>
               </div>
         
               <div class="main-match-teams">
                 
                 <div class="team-col">
                   <img src="crveni.png" class="team-logo" alt="Crveni" loading="lazy" decoding="async">
                   <div class="team-name team-name-red">Crveni</div>
                 </div>
         
                 <div class="score">
         <span class="red">${escapeHtml(latest.red)}</span> -
         <span class="blue">${escapeHtml(latest.blue)}</span>
         </div>
         
         
                 <div class="team-col">
                   <img src="plavi.png" class="team-logo" alt="Plavi" loading="lazy" decoding="async">
                   <div class="team-name team-name-blue">Plavi</div>
                 </div>
         
               </div>
             </div>
           `;
         
           const recent = matches.slice(1,4);
         
           if (recent.length) {
             let matchesHTML = '';
         
             recent.forEach((m, idx) => {
               const matchIndex = idx + 1;
               const recentMatchLinks = `
         ${m.info ? `<button type="button" class="info-link" onclick="openMatchInfo(${matchIndex})">ℹ️ Info</button>` : ""}
         <button type="button" class="info-link" onclick="openMatchScorers(${matchIndex})">⚽ Strelci</button>
         <button type="button" class="info-link" onclick="openMatchLineup(${matchIndex})">🧍 Sastavi</button>
         `;
         
         
               matchesHTML += `
                 <div class="match-box">
                   <div class="match-info">
                     ${formatMatchMeta(m.round, m.date, m.time)}
                     <div class="match-links">${recentMatchLinks}</div>
                   </div>
         
                   <div class="recent-match-teams">
         
                     <div class="team-col">
                       <img src="crveni.png" class="team-logo" style="width:140px; height:140px;" alt="Crveni" loading="lazy" decoding="async">
                       <div class="team-name team-name-red team-name-small">Crveni</div>
                     </div>
         
                    <div class="score-small">
         <span class="red">${escapeHtml(m.red)}</span> -
         <span class="blue">${escapeHtml(m.blue)}</span>
         </div>
         
                     <div class="team-col">
                       <img src="plavi.png" class="team-logo" style="width:140px; height:140px;" alt="Plavi" loading="lazy" decoding="async">
                       <div class="team-name team-name-blue team-name-small">Plavi</div>
                     </div>
         
                   </div>
                 </div>
               `;
             });
         
             recentBox.innerHTML = `
               <div class="card">
                 <h2 class="card-header">Rezultati prošlih kola</h2>
                 <div class="card-content recent-matches-content">
                   ${matchesHTML}
                   <button class="more-btn" onclick="window.location='istorija.html'">
                     Vidi sve utakmice →
                   </button>
                 </div>
               </div>
             `;
           }
         }

         function renderHighlights(matches) {
           const box = document.getElementById("insightsGrid");
           if (!box) return;

           if (!matches.length) {
             box.innerHTML = `<div class="insight-item"><p class="insight-value">Nema dovoljno podataka za statistiku.</p></div>`;
             return;
           }

           const sumGoals = (m) => (Number(m.red) || 0) + (Number(m.blue) || 0);
           const diffGoals = (m) => Math.abs((Number(m.red) || 0) - (Number(m.blue) || 0));

           const mostGoals = matches.reduce((best, m) => sumGoals(m) > sumGoals(best) ? m : best, matches[0]);
           const biggestWin = matches.reduce((best, m) => diffGoals(m) > diffGoals(best) ? m : best, matches[0]);
           const avgGoals = matches.reduce((acc, m) => acc + sumGoals(m), 0) / matches.length;
           let biggestWinner = "Nerešeno";
           if ((Number(biggestWin.red) || 0) > (Number(biggestWin.blue) || 0)) biggestWinner = "Crveni";
           if ((Number(biggestWin.blue) || 0) > (Number(biggestWin.red) || 0)) biggestWinner = "Plavi";

           box.innerHTML = `
             <article class="insight-item">
               <p class="insight-label">Meč sa najviše golova</p>
               <p class="insight-value">
                 <span class="insight-scoreline">
                   <span class="insight-team">Crveni</span>
                   <span>${escapeHtml(mostGoals.red)}</span>
                   <span class="insight-sep">:</span>
                   <span>${escapeHtml(mostGoals.blue)}</span>
                   <span class="insight-team">Plavi</span>
                 </span>
                 <small class="insight-meta">${formatMatchMeta(mostGoals.round, mostGoals.date, mostGoals.time)}</small>
               </p>
             </article>
             <article class="insight-item">
               <p class="insight-label">Najubedljivija pobeda</p>
               <p class="insight-value">
                 <span class="insight-scoreline">
                   <span class="insight-team">Crveni</span>
                   <span>${escapeHtml(biggestWin.red)}</span>
                   <span class="insight-sep">:</span>
                   <span>${escapeHtml(biggestWin.blue)}</span>
                   <span class="insight-team">Plavi</span>
                 </span>
                 <small class="insight-meta">${biggestWinner} • Razlika ${diffGoals(biggestWin)}</small>
               </p>
             </article>
             <article class="insight-item">
               <p class="insight-label">Prosek golova po meču</p>
               <p class="insight-value">${avgGoals.toFixed(2)}<br><small>Na osnovu ${matches.length} odigranih mečeva</small></p>
             </article>
           `;
         }
         
         /* -------- CALCULATE TABLE DATA -------- */
         function calculateTable(matches) {
           tableData = {
             Crveni: { Tim: 'Crveni', U:0,P:0,N:0,I:0,GD:0,GP:0,GR:0,B:0 },
             Plavi:  { Tim: 'Plavi', U:0,P:0,N:0,I:0,GD:0,GP:0,GR:0,B:0 }
           };
         
           matches.forEach(m=>{
             tableData.Crveni.U++; tableData.Plavi.U++;
         
             tableData.Crveni.GD += m.red;
             tableData.Crveni.GP += m.blue;
         
             tableData.Plavi.GD += m.blue;
             tableData.Plavi.GP += m.red;
         
             if (m.red > m.blue) {
               tableData.Crveni.P++; tableData.Crveni.B += 3; tableData.Plavi.I++;
             } else if (m.blue > m.red) {
               tableData.Plavi.P++; tableData.Plavi.B += 3; tableData.Crveni.I++;
             } else {
               tableData.Crveni.N++; tableData.Plavi.N++;
               tableData.Crveni.B++; tableData.Plavi.B++;
             }
           });
         
           tableData.Crveni.GR = tableData.Crveni.GD - tableData.Crveni.GP;
           tableData.Plavi.GR  = tableData.Plavi.GD - tableData.Plavi.GP;
         }
         
         /* -------- RENDER TABLE WITH SORTING -------- */
         function renderTable() {
           const teams = Object.values(tableData);
           const { field, dir } = currentSort.league;
         
           teams.sort((a, b) => {
         // 1. Bodovi (uvek primarno)
         if (b.B !== a.B) {
         return b.B - a.B;
         }
         
         // 2. Gol razlika (sekundarno)
         if (b.GR !== a.GR) {
         return b.GR - a.GR;
         }
         
         // 3. Tek onda aktivni sort (ako klikneš kolonu)
         const valA = a[field];
         const valB = b[field];
         
         if (typeof valA === "number" && typeof valB === "number") {
         return dir === 'asc' ? valA - valB : valB - valA;
         }
         
         return 0;
         });
         
         
           const tbody = document.getElementById("leagueBody");
           tbody.innerHTML = "";
         
           teams.forEach((team, index) => {
             const highlightClass = index === 0 ? 'class="highlight"' : '';
             tbody.innerHTML += `
               <tr ${highlightClass}>
                 <td><strong>${index + 1}</strong></td>
                 <td>${team.Tim}</td>
                 <td>${team.U}</td>
                 <td>${team.P}</td>
                 <td>${team.N}</td>
                 <td>${team.I}</td>
                 <td>${team.GD}</td>
                 <td>${team.GP}</td>
                 <td>${team.GR}</td>
                 <td><strong>${team.B}</strong></td>
               </tr>
             `;
           });
         
           updateSortIndicators('league');
         }
         
         /* -------- RENDER SCORERS TABLE -------- */
         function renderScorers() {
           const scorers = [...scorersData];
           const { field, dir } = currentSort.scorers;
         
           scorers.sort((a, b) => {
             if (field === 'name') {
               const nameA = a.name.replace(/\s*\(c\)\s*/gi, '').replace(/\s*\(g\)\s*/gi, '').trim().toLowerCase();
               const nameB = b.name.replace(/\s*\(c\)\s*/gi, '').replace(/\s*\(g\)\s*/gi, '').trim().toLowerCase();
               return dir === 'asc'
                 ? nameA.localeCompare(nameB, 'sr')
                 : nameB.localeCompare(nameA, 'sr');
             } else if (field === 'team') {
               if (a.team === b.team) {
                 return b.goals - a.goals;
               }
               return dir === 'asc'
                 ? a.team.localeCompare(b.team, 'sr')
                 : b.team.localeCompare(a.team, 'sr');
             } else if (field === 'matches') {
               if (a.matches === b.matches) {
                 return b.goals - a.goals;
               }
               return dir === 'asc' ? a.matches - b.matches : b.matches - a.matches;
             } else {
               if (a.goals === b.goals) {
                 const nameA = a.name.replace(/\s*\(c\)\s*/gi, '').replace(/\s*\(g\)\s*/gi, '').trim();
                 const nameB = b.name.replace(/\s*\(c\)\s*/gi, '').replace(/\s*\(g\)\s*/gi, '').trim();
                 return nameA.localeCompare(nameB, 'sr');
               }
               return dir === 'asc' ? a.goals - b.goals : b.goals - a.goals;
             }
           });
         
           const tbody = document.getElementById("scorersBody");
           tbody.innerHTML = "";
         
           scorers.forEach(player => {
             tbody.innerHTML += `
               <tr class="team-${player.teamKey}">
                 <td>${formatPlayerName(player.name)}</td>
                 <td>${player.team}</td>
                 <td><strong>${player.goals}</strong></td>
                 <td>${player.matches}</td>
               </tr>
             `;
           });
         
           updateSortIndicators('scorers');
         }
         
         /* -------- UPDATE SORT INDICATORS -------- */
         function updateSortIndicators(table) {
           const { field, dir } = currentSort[table];
         
           document.querySelectorAll(`th[data-table="${table}"]`).forEach(th => {
             th.classList.remove('sorted-asc', 'sorted-desc');
             if (th.dataset.sort === field) {
               th.classList.add(dir === 'asc' ? 'sorted-asc' : 'sorted-desc');
             }
           });
         }
         
         /* -------- SORT CLICK HANDLERS -------- */
         document.addEventListener("DOMContentLoaded", () => {
           initThemeToggle();
           document.querySelectorAll("th[data-sort]").forEach(th => {
             th.addEventListener("click", () => {
               const field = th.dataset.sort;
               const table = th.dataset.table;
         
               if (currentSort[table].field === field) {
                 currentSort[table].dir = currentSort[table].dir === 'asc' ? 'desc' : 'asc';
               } else {
                 currentSort[table].field = field;
                 currentSort[table].dir = field === 'name' ? 'asc' : 'desc';
               }
         
               if (table === 'league') {
                 renderTable();
               } else if (table === 'scorers') {
                 renderScorers();
               }
             });
           });
         });
         
         /* -------- FORMA -------- */
         function renderForm(matches) {
           const last5 = matches.slice(0,5);
         
           let crDots = "", plDots = "";
         
           last5.forEach(m=>{
             crDots += (m.red > m.blue) ? `<span class="dot win" title="Pobeda"></span>` :
                       (m.red < m.blue) ? `<span class="dot loss" title="Poraz"></span>` :
                                          `<span class="dot draw" title="Nerešeno"></span>`;
         
             plDots += (m.blue > m.red) ? `<span class="dot win" title="Pobeda"></span>` :
                       (m.blue < m.red) ? `<span class="dot loss" title="Poraz"></span>` :
                                          `<span class="dot draw" title="Nerešeno"></span>`;
           });
         
           document.getElementById("formBox").innerHTML = `
             <div class="form-row">
               <div class="form-team red">Crveni</div>
               <div class="form-dots">${crDots}</div>
             </div>
             <div class="form-row">
               <div class="form-team blue">Plavi</div>
               <div class="form-dots">${plDots}</div>
             </div>
           `;
         }
         
         let currentModalMatchIndex = null;
         let currentModalTab = "info";
         let modalScrollY = 0;
         
         function openModal() {
         const overlay = document.getElementById("modalOverlay");
         if (!document.body.classList.contains("modal-open")) {
         modalScrollY = window.scrollY || window.pageYOffset || 0;
         document.body.style.top = `-${modalScrollY}px`;
         document.body.classList.add("modal-open");
         }
         overlay.style.display = "flex";
         }
         
         function closeModal() {
         document.getElementById("modalOverlay").style.display = "none";
         if (!document.body.classList.contains("modal-open")) return;
         document.body.classList.remove("modal-open");
         document.body.style.top = "";
         window.scrollTo(0, modalScrollY);
         }
         
         function renderModalTabs(activeTab) {
         return `
         <div class="modal-tabs-shell">
         <div class="modal-tabs" role="tablist" aria-label="Prikaz podataka meča">
         <button type="button" class="modal-tab ${activeTab === "info" ? "active" : ""}" data-modal-tab="info" role="tab" aria-selected="${activeTab === "info"}">ℹ️ Info</button>
         <button type="button" class="modal-tab ${activeTab === "scorers" ? "active" : ""}" data-modal-tab="scorers" role="tab" aria-selected="${activeTab === "scorers"}">⚽ Strelci</button>
         <button type="button" class="modal-tab ${activeTab === "lineup" ? "active" : ""}" data-modal-tab="lineup" role="tab" aria-selected="${activeTab === "lineup"}">🧍 Sastavi</button>
         </div>
         </div>
         `;
         }
         
         function renderInfoPanel(match) {
         const infoText = (match.info || "").trim();
         return `
         <p class="modal-subtitle">Detalji utakmice</p>
         <div class="modal-info-card">${infoText ? escapeHtml(infoText) : "Nema dodatnih informacija za ovaj meč."}</div>
         `;
         }
         
         function renderScorersPanel(match) {
         const scorers = match.scorers || [];
         if (!scorers.length) {
         return `<div class="modal-panel">
         <p class="modal-subtitle">Lista strelaca</p>
         <p class="modal-empty">Nema strelaca za ovaj meč.</p>
         </div>`;
         }
         
         const grouped = {};
         let ownGoals = 0;
         scorers.forEach(s => {
         if (s.type === "own_goal") {
         ownGoals += 1;
         } else {
         const key = `${s.team}:${s.id}`;
         grouped[key] = (grouped[key] || 0) + 1;
         }
         });
         
         let html = `<p class="modal-subtitle">Lista strelaca</p><div class="scorers-list">`;
         const rows = Object.entries(grouped)
         .map(([key, count]) => {
         let name = "";
         let teamClass = "";
         
         if (key === "__own_goal__") {
         name = "Autogol (OG)";
         teamClass = "red";
         } else {
         const [team, id] = key.split(":");
         name = allPlayers[team]?.[id]?.name || "(nepoznat)";
         teamClass = team === "crveni" ? "red" : "blue";
         }
         
         return {
         name: name.replace(/\s*\(c\)|\s*\(g\)/gi, "").trim(),
         displayName: name,
         teamClass,
         count
         };
         })
         .sort((a, b) => {
         if (b.count !== a.count) return b.count - a.count;
         return a.name.localeCompare(b.name, "sr");
         });
         
         rows.forEach((item, idx) => {
          html += `
         <div class="scorer-row ${item.teamClass}">
         <div class="scorer-main">
         <div class="scorer-name">${formatPlayerName(item.displayName)}</div>
         </div>
         <span class="scorer-goals ${item.teamClass}">⚽ ${item.count}</span>
         </div>
         `;
         });
         html += "</div>";
         
         if (ownGoals > 0) {
         html += `<div class="own-goal-note">Autogolovi na meču: ${ownGoals}</div>`;
         }
         
         return `<div class="modal-panel">${html}</div>`;
         }
         
         function renderLineupPanel(match) {
         const redPlayers = Object.entries(match.played || {})
         .filter(([_, team]) => team === "crveni")
         .map(([id]) => allPlayers.crveni?.[id]?.name || "(nepoznat)");
         
         const bluePlayers = Object.entries(match.played || {})
         .filter(([_, team]) => team === "plavi")
         .map(([id]) => allPlayers.plavi?.[id]?.name || "(nepoznat)");
         
         const stripTags = (name) => String(name || "(nepoznat)")
         .replace(/\s*\(c\)\s*/gi, " ")
         .replace(/\s*\(g\)\s*/gi, " ")
         .replace(/\s+/g, " ")
         .trim() || "(nepoznat)";
         
         const buildFive = (players) => {
         if (!players.length) return { five: [], bench: [] };
         
         const mapped = players.map((name, idx) => ({
         name,
         clean: stripTags(name),
         isGoalkeeper: /\(\s*g\s*\)/i.test(name),
         idx
         }));
         
         const gkIndex = mapped.findIndex(p => p.isGoalkeeper);
         const gk = gkIndex >= 0 ? mapped[gkIndex] : mapped[0];
         const outfield = mapped.filter((_, idx) => idx !== (gkIndex >= 0 ? gkIndex : 0));
         
         const five = [gk, ...outfield.slice(0, 4)];
         const bench = outfield.slice(4).map(p => p.clean);
         return { five, bench };
         };
         
         const renderNodes = (five, teamClass, positions) => {
         return positions.map((pos, idx) => {
         const p = five[idx];
         if (!p) return "";
         return `
         <div class="lineup-node ${teamClass} ${pos}">
         <span class="lineup-dot" aria-hidden="true"></span>
         <span class="lineup-label">${escapeHtml(p.clean)}</span>
         </div>
         `;
         }).join("");
         };
         
         const red = buildFive(redPlayers);
         const blue = buildFive(bluePlayers);
         
         if (!red.five.length && !blue.five.length) {
         return `
         <div class="modal-panel">
         <p class="modal-subtitle">Sastavi ekipa</p>
         <p class="modal-empty">Nema podataka</p>
         </div>
         `;
         }
         
         const redNodes = renderNodes(red.five, "red", ["r-gk", "r-dl", "r-dr", "r-fl", "r-fr"]);
         const blueNodes = renderNodes(blue.five, "blue", ["b-gk", "b-dl", "b-dr", "b-fl", "b-fr"]);
         
         const renderBenchTeam = (teamClass, title, bench) => {
         if (!bench.length) return "";
         return `
         <div class="lineup-bench-team ${teamClass}">
         <p class="lineup-bench-title">${title} klupa</p>
         <div class="bench-list">
         ${bench.map(name => `<span class="bench-chip">${escapeHtml(name)}</span>`).join("")}
         </div>
         </div>
         `;
         };
         
         const benches = `
         ${renderBenchTeam("red", "Crveni", red.bench)}
         ${renderBenchTeam("blue", "Plavi", blue.bench)}
         `;
         
         return `
         <div class="modal-panel">
         <p class="modal-subtitle">Sastavi ekipa</p>
         <div class="lineup-unified-card">
         <div class="lineup-pitch unified">
         <span class="lineup-half-label red">🔴 Crveni</span>
         <span class="lineup-half-label blue">🔵 Plavi</span>
         ${redNodes}
         ${blueNodes}
         </div>
         ${benches ? `<div class="lineup-bench-grid">${benches}</div>` : ""}
         </div>
         </div>
         `;
         }
         
         function renderModalCurrentTab() {
         if (currentModalMatchIndex == null) return;
         const match = allMatches[currentModalMatchIndex];
         if (!match) return;
         
         const content = document.getElementById("modalContent");
         let panel = "";
         
         if (currentModalTab === "scorers") {
         panel = renderScorersPanel(match);
         document.getElementById("modalTitle").innerText = "Strelci na meču";
         } else if (currentModalTab === "lineup") {
         panel = renderLineupPanel(match);
         document.getElementById("modalTitle").innerText = "🧍 Sastavi";
         } else {
         panel = `<div class="modal-panel">${renderInfoPanel(match)}</div>`;
         document.getElementById("modalTitle").innerText = "ℹ️ Info o meču";
         }
         
         content.innerHTML = `${renderModalTabs(currentModalTab)}${panel}`;
         }
         
         /* -------- MODAL - INFO -------- */
         window.openMatchInfo = idx => {
         currentModalMatchIndex = idx;
         currentModalTab = "info";
         renderModalCurrentTab();
         openModal();
         };
         
         
         /* -------- MODAL - SCORERS -------- */
         window.openMatchScorers = idx => {
         currentModalMatchIndex = idx;
         currentModalTab = "scorers";
         renderModalCurrentTab();
         openModal();
         };
         
         window.openMatchLineup = idx => {
         currentModalMatchIndex = idx;
         currentModalTab = "lineup";
         renderModalCurrentTab();
         openModal();
         };
         document.getElementById("modalContent").addEventListener("click", (e) => {
         const tabButton = e.target.closest("button[data-modal-tab]");
         if (!tabButton) return;
         currentModalTab = tabButton.dataset.modalTab;
         renderModalCurrentTab();
         });
         
         document.getElementById("closeModal").addEventListener("click", () => {
         closeModal();
         });
         
         document.getElementById("modalOverlay").addEventListener("click", (e) => {
         if (e.target.id === "modalOverlay") {
         closeModal();
         }
         });
         document.addEventListener("keydown", (e) => {
         if (e.key === "Escape") {
         closeModal();
         }
         });
         
         const topFab = document.getElementById("topFab");
         window.addEventListener("scroll", () => {
           if (window.scrollY > 380) {
             topFab.classList.add("show");
           } else {
             topFab.classList.remove("show");
           }
         });
         topFab.addEventListener("click", () => {
           window.scrollTo({ top: 0, behavior: "smooth" });
         });
         
      </script>
   </body>
</html>
